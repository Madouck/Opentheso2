<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:f="http://xmlns.jcp.org/jsf/core"
             xmlns:p="http://primefaces.org/ui">

    <div class="col-12" style="height: 100%;">
        <div class="card shadow mb-4" style="height: 100%; padding-top: 20px">

            <p:toolbar rendered="#{currentUser.allAuthorizedProjectAsAdmin.size() > 0 or currentUser.nodeUser.isSuperAdmin}"
                       style="margin-left: 30px; margin-right: 30px; margin-top: 10px; margin-bottom: -10px">
                <p:toolbarGroup align="left">
                    <p:commandButton value="Nouveau" icon="fas fa-plus-circle"
                                     title="Créer un nouveau thésaurus"
                                     styleClass="ui-button-success"
                                     actionListener="#{newThesoBean.init()}"
                                     action="#{viewEditionBean.setIsViewNewTheso(true)}"
                                     update="containerIndex" />
                </p:toolbarGroup>                    
                <p:toolbarGroup align="right">
                    <p:menuButton icon="fas fa-download" value="Importer" style="padding-left: 35px" >
                        <p:menuitem value="Format SKOS" icon="fas fa-download" actionListener="#{importFileBean.init()}"
                                    action="#{viewEditionBean.setIsViewImportSkos(true)}" ajax="true" process="@this"
                                    update="containerIndex"  style="padding-left: 35px" />

                        <p:menuitem value="Format CSV" icon="fas fa-download" actionListener="#{importFileBean.init()}"
                                    action="#{viewEditionBean.setIsViewImportCsv(true)}"
                                    update="containerIndex"  style="padding-left: 35px"  />

                        <p:menuitem value="Format CSV Structuré" icon="fas fa-download" actionListener="#{importFileBean.init()}"
                                    action="#{viewEditionBean.setIsViewImportCSVStructure(true)}"
                                    update="containerIndex" style="padding-left: 35px"  />
                    </p:menuButton>
                </p:toolbarGroup>

            </p:toolbar>

            <div class="card mb-4 py-3 border-left-success" style="margin: 30px; border-color: #43B572">

                <p:dataTable value="#{roleOnTheso.nodeListThesoAsAdmin}" var="listTheso"
                             filteredValue="#{roleOnTheso.nodeListThesoAsAdminFiltered}" size="small"
                             widgetVar="listThesoTable" styleClass="products-table"
                             resizableColumns="true" scrollHeight="450" reflow="true"
                             paginator="true" rows="10" rowSelectMode="add" paginatorPosition="bottom"
                             emptyMessage="Aucun thésaurus disponible..."
                             stripedRows="true"
                             style="margin-bottom: -17px; margin-top: -16px;">

                    <f:facet name="header">
                        <div class="products-table-header">
                            <span style="font-weight: bold">Liste des thésaurus</span>
                        </div>
                    </f:facet>

                    <p:column width="10" headerText="Id" sortBy="#{listTheso.id}">
                        <h:outputText value="#{listTheso.id}" style="font-size: 14px"/>
                    </p:column>                                
                    <p:column width="60" headerText="Nom du thésaurus"  sortBy="#{listTheso.value}">
                        <h:outputText value="#{listTheso.value}" style="font-size: 14px"/>
                    </p:column>

                    <p:column width="10" headerText="Public/Privé">
                        <p:toggleSwitch value="#{listTheso.status}" disabled="true" style="margin-top: 5px" />
                    </p:column>

                    <p:column width="10" headerText="Exporter">
                        <p:menuButton icon="fas fa-upload" value="Export" style="margin-left: -10px" >
                            <p:menuitem value="Format Skos" actionListener="#{viewExportBean.init(listTheso, 'RDF')}"
                                        action="#{viewEditionBean.setIsViewExportSkos(true)}" icon="fas fa-upload"
                                        title="Exporter le thésaurus au format Skos" update="containerIndex" />

                            <p:menuitem value="Format PDF" actionListener="#{viewExportBean.init(listTheso, 'PDF')}"
                                        action="#{viewEditionBean.setIsViewExportPDF(true)}" update="containerIndex"
                                        title="Exporter le thésaurus au format PDF" icon="fas fa-upload" />

                            <p:menuitem value="Format CSV" actionListener="#{viewExportBean.init(listTheso, 'CSV')}"
                                        action="#{viewEditionBean.setIsViewExportCSV(true)}" update="containerIndex"
                                        title="Exporter le thésaurus au format CSV" icon="fas fa-upload" />

                            <p:menuitem value="Format CSV Structurée" actionListener="#{viewExportBean.init(listTheso, 'CSV_STRUC')}"
                                        action="#{viewEditionBean.setIsViewExportCSVStructure(true)}" update="containerIndex" icon="fas fa-upload"
                                        title="Exporter les labels avec leurs arborescences au format CSV"/>

                            <p:menuitem value="Identifiants en CSV" actionListener="#{viewExportBean.init(listTheso, 'CSV_id')}"
                                        action="#{viewEditionBean.setIsViewExportCSV_id(true)}" update="containerIndex" icon="fas fa-upload"
                                        title="Exporter les labels, identifiants, definitions au format CSV"/>

                            <p:menuitem value="Concepts dépréciés en CSV" update="containerIndex" icon="fas fa-upload"
                                        actionListener="#{viewExportBean.init(listTheso, 'deprecated')}"
                                        action="#{viewEditionBean.setIsViewExportCSV(true)}" />

                            <p:menuitem value="Virtuoso (SKOS)" actionListener="#{viewExportBean.init(listTheso, 'RDF')}"
                                        action="#{viewEditionBean.setIsViewExportVirtuoso(true)}" update="containerIndex"
                                        title="Exporter le thésaurus dans vertuoso au format RDF" icon="fas fa-upload"/>
                        </p:menuButton>
                    </p:column>

                    <p:column width="10" headerText="Modifier" style="margin-top: 5px" >
                        <p:commandButton icon="pi pi-pencil" styleClass="rounded-button ui-button-outlined"
                                         update="containerIndex" process="@this" style="color: #43B572"
                                         actionListener="#{editThesoBean.init(listTheso)}"
                                         action="#{viewEditionBean.setIsViewModifyTheso(true)}"/>
                    </p:column>

                    <p:column width="10" headerText="Supprimer" style="margin-top: 5px">
                        <p:commandButton icon="pi pi-trash" styleClass="rounded-button ui-button-danger ui-button-outlined" 
                                         update="idConfirmDelete" process="@this" ajax="true"
                                         actionListener="#{deleteThesoBean.confirmDelete(listTheso, selectedTheso.currentIdTheso)}"
                                         oncomplete="PF('confirmDelete').show();" />
                    </p:column>

                    <f:facet name="footer">
                        <span class="p-text-bold">
                            <h:outputText value="Nombre total des thésaurus disponible : " style="font-size: 14px;"/>
                            <h:outputText value="#{roleOnTheso.nodeListThesoAsAdmin.size()}" style="font-size: 16px; color: #f47b2a"/>
                        </span>
                    </f:facet>
                </p:dataTable>
            </div>
        </div>
    </div>
</ui:fragment>