<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:leaf="http://java.sun.com/jsf/composite/jsf2leaf">

    <div style="width: 100%; display: flex; background-color: #ecf8f1">
        
        <div style="height: 100%; vertical-align: central; margin: 5px; margin-bottom: 7px">
            <p:menuButton icon="pi pi-align-justify" rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso 
                                                                 or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}">
                
                <p:menuitem rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso 
                                        or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            actionListener="#{newConcept.reset()}" oncomplete="PF('addNT').show();"
                            update="conceptForm:idAddNT" 
                            value="#{langueBean.getMsg('rightbody.concept.new_concept')}"/>

                <p:menuitem rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso 
                                        or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                            actionListener="#{editFacet.initNewFacet()}"
                            update="conceptForm:idAddFacet"
                            oncomplete="PF('addFacet').show();" 
                            value="#{langueBean.getMsg('rightbody.concept.new_facet')}"/>

                <p:menuitem  value="#{langueBean.getMsg('rightbody.concept.cut_move')}"
                             action="#{dragAndDrop.setDragNode(tree.selectedNode)}"
                             actionListener="#{dragAndDrop.onStartCut(conceptView.nodeConcept)}"
                             styleClass="buttonIconOrange"
                             ajax="true"
                             style="font-size: 12px;"
                             update="containerIndex messageIndex" />

                <p:menuitem rendered="#{(dragAndDrop.isCopyOn) and
                                        (dragAndDrop.cuttedConcept.concept.idConcept != conceptView.nodeConcept.concept.idConcept)}"
                            value="#{langueBean.getMsg('rightbody.concept.paste')} #{cutAndPaste.nodeConceptDrag.term.lexical_value} #{langueBean.getMsg('rightbody.concept.as_specific')}"
                            actionListener="#{dragAndDrop.setDropNode(tree.selectedNode)}"
                            action="#{dragAndDrop.paste(conceptView.nodeConcept)}"
                            styleClass="buttonIconOrange"
                            ajax="true"
                            style="font-size: 12px;"
                            update="containerIndex messageIndex" />

                <p:menuitem rendered="#{(dragAndDrop.isCopyOn) and (!dragAndDrop.cuttedConcept.concept.topConcept)}"
                            value="#{langueBean.getMsg('rightbody.concept.paste')} #{cutAndPaste.nodeConceptDrag.term.lexical_value} #{langueBean.getMsg('rightbody.concept.at_the_root')}"
                            actionListener="#{dragAndDrop.setIsDropToRoot(true)}"
                            action="#{dragAndDrop.paste(null)}"
                            styleClass="buttonIconOrange"
                            ajax="true"
                            style="font-size: 12px;"
                            update="containerIndex messageIndex" />

                <p:menuitem value="#{langueBean.getMsg('rightbody.concept.delete_concept')}"
                            actionListener="#{editConcept.infosDelete()}"
                            action="#{editConcept.reset('')}"
                            oncomplete="PF('deleteConcept').show();"
                            style="font-size: 12px;" />

                <p:menuitem rendered="#{!conceptView.nodeConcept.concept.isDeprecated}"
                            value="#{langueBean.getMsg('rightbody.concept.deprecate_concept')}"
                            action="#{editConcept.reset('')}"
                            oncomplete="PF('deprecateConcept').show();"
                            style="font-size: 12px;" />
            </p:menuButton>
        </div>
        <div style="margin-top: 7px">
            <ui:repeat var="path" value="#{conceptView.pathLabel}" >
                <h:panelGroup rendered="#{path.isStartOfPath}">
                    <i class="fas fa-home" size="xs" style="color: #f47b2a;"/>
                </h:panelGroup>
                <p:commandLink rendered="#{path.isIsStartOfPath()}" style="color:#43B572; background: none; border: none; box-shadow: none; font-size: 12px"
                               value=" #{path.title}" action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,
                                         path.idConcept, selectedTheso.currentLang)}" update="containerIndex" /> 
                <p:commandLink rendered="#{!path.isStartOfPath}" style="color:#43B572; background: none; border: none; box-shadow: none; font-size: 12px"
                               value="#{path.title}" action="#{conceptView.getConcept(selectedTheso.selectedIdTheso, path.idConcept, selectedTheso.currentLang)}"
                               update="containerIndex"/>                     
                <h:outputText value=" > " style="font-size: 12px; font-weight: bold"/>
            </ui:repeat>

            <i rendered="#{conceptView.nodeConcept.concept.topConcept}" value="fas fa-home" size="xs" style="color: #f47b2a;"/>
            <h:outputText rendered="#{conceptView.nodeConcept.term.lexical_value != ''}" value=" #{conceptView.nodeConcept.term.lexical_value}" style="font-size: 12px;"/>
            <h:outputText rendered="#{conceptView.nodeConcept.term.lexical_value == ''}" value=" (#{conceptView.nodeConcept.concept.idConcept})" style="font-size: 12px;"/>                
            <h:outputText value=" > " style="font-size: 12px; font-weight: bold"/>
        </div>
    </div>


    <ui:include src="../../../dialog/concept/deleteConcept.xhtml" />
    <ui:include src="../../../dialog/concept/deprecateConcept.xhtml" />

</ui:fragment>