<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:leaf="http://java.sun.com/jsf/composite/jsf2leaf">

    <div class="card mb-4 py-3 border-left-success" style="margin-top: -15px; vertical-align: central">
        <div class="list-group" style="margin-top: -10px; margin-bottom: -10px">
            <div class="list-group-item list-group-item-action" style=" margin-top: -5px">
                <!-- ligne images --> 
                <h:panelGroup rendered="#{(currentUser.nodeUser != null) or (conceptView.nodeConcept.nodeimages.size() !=0)}">               
                    <div class="row" style="padding-top: 3px;">
                        <h:panelGroup rendered="#{conceptView.nodeConcept.nodeimages.size() == 0}">
                            <div class="col-3" style="text-align: right;">
                                <h:outputText value=" #{langueBean.getMsg('rightbody.concept.image')}" 
                                              title="#{langueBean.getMsg('rightbody.concept.image')}"
                                              style="font-size: 14px; font-weight: bold; margin-right: 10px"/>

                                <p:menuButton rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                              icon="fas fa-cog" style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                                    <p:menuitem value="#{langueBean.getMsg('rightbody.concept.add_image')}" 
                                                actionListener="#{imageBean.reset()}"
                                                oncomplete="PF('addImage').show();"
                                                style="font-size: 12px;" />
                                </p:menuButton> 
                            </div>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{conceptView.nodeConcept.nodeimages.size() != 0}">
                            <div class="col-3" style="text-align: right;">
                                <h:outputText value=" #{langueBean.getMsg('rightbody.concept.image')}" 
                                              title="#{langueBean.getMsg('rightbody.concept.image')}"
                                              style="font-size: 14px; font-weight: bold; margin-right: 10px"/>

                                <h:outputText value="( #{conceptView.nodeConcept.nodeimages.size()} )" 
                                              style="color: #43B572; margin-right: 10px"/>

                                <p:menuButton rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                              icon="pi pi-cog" style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                                    <p:menuitem value="#{langueBean.getMsg('rightbody.concept.add_image')}" 
                                                actionListener="#{imageBean.reset()}"
                                                oncomplete="PF('addImage').show();"
                                                style="font-size: 12px;" />

                                    <p:menuitem value="#{langueBean.getMsg('rightbody.concept.edit_image')}" 
                                                actionListener="#{imageBean.reset()}"                  
                                                oncomplete="PF('updateImage').show();"
                                                update="idUpdateImage"
                                                style="font-size: 12px;" />

                                    <p:menuitem value="#{langueBean.getMsg('rightbody.concept.delete_image')}" 
                                                actionListener="#{imageBean.reset()}"
                                                oncomplete="PF('deleteImage').show();"
                                                update="idDeleteImage"
                                                style="font-size: 12px;" />
                                </p:menuButton> 
                            </div>
                        </h:panelGroup>

                        <h:panelGroup rendered="#{conceptView.nodeConcept.nodeimages.size() == 0}">
                            <div class="col-9" style="margin-top: 3px">
                                <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" 
                                               style="font-size: 12px; color: grey; font-style: italic " />
                            </div>
                        </h:panelGroup>

                        <h:panelGroup rendered="#{conceptView.nodeConcept.nodeimages.size() != 0}">
                            <div class="col-9" style="margin-top: 3px">
                                <p:galleria value="#{conceptView.nodeConcept.nodeimages}" var="images" 
                                            panelWidth="450" panelHeight="110" autoPlay="false" showCaption="false">
                                    <p:graphicImage value="#{images.uri}" title="#{images.copyRight}" url="#{images.uri}"
                                                    alt="#{images.uri}" height="100" style="cursor: pointer;"/>
                                </p:galleria>
                            </div>
                        </h:panelGroup>
                    </div>
                </h:panelGroup>                  
            </div>

            <!-- ligne GPS MAP-->
            <h:panelGroup id="idConceptGps" rendered="#{currentUser.nodeUser != null}">
                <div class="list-group-item list-group-item-action" style="margin-bottom: -5px">
                    <div class="row" style="padding-top: 3px; padding-bottom: 5px;">
                        <div class="col-3" style="text-align: right;">
                            <h:outputText value="#{langueBean.getMsg('rightbody.concept.gps_coordinates')}" 
                                          title="#{langueBean.getMsg('rightbody.concept.gps_coordinates')}"
                                          style="font-size: 14px; font-weight: bold; margin-right: 10px"/>

                            <p:menuButton rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                          icon="fas fa-cog" style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">

                                <p:menuitem value="#{langueBean.getMsg('rightbody.concept.add_edit_gps_coordinates')}" 
                                            actionListener="#{gpsBean.reset()}"
                                            oncomplete="PF('setGps').show();"
                                            update="idSetGps"
                                            style="font-size: 12px;" />

                                <p:menuitem value="#{langueBean.getMsg('rightbody.concept.delete_gps_coordinates')}" 
                                            actionListener="#{gpsBean.reset()}"
                                            oncomplete="PF('deleteGps').show();"
                                            update="idDeleteGps"
                                            style="font-size: 12px;" />
                            </p:menuButton>
                        </div> 

                        <h:panelGroup rendered="#{conceptView.nodeConcept.nodeGps == null}">
                            <div class="col-9" style="margin-top: 3px">
                                <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" 
                                               style="font-size: 12px; color: grey; font-style: italic " />
                            </div>
                        </h:panelGroup>

                        <h:panelGroup rendered="#{conceptView.nodeConcept.nodeGps != null}">
                            <div class="col-9">
                                <div class="row">
                                    <div class="col-12">
                                        <h:outputText value="Latitude : " style="font-size: 12px; font-weight: bold; margin-right: 10px"/>
                                        <h:outputText value="#{conceptView.nodeConcept.nodeGps.latitude}" style="font-size: 12px; color: #666666"/>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12" style="margin-top: 8px">
                                        <h:outputText value="Longitude : " style="font-size: 12px; font-weight: bold; margin-right: 10px"/>
                                        <h:outputText value="#{conceptView.nodeConcept.nodeGps.longitude}" style="font-size: 12px; color: #666666"/>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12" style="margin-top: 10px; border-color: #43B572">
                                        <leaf:mapAdvanced map="#{conceptView.mapModel}" />
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                    </div>
                </div>
            </h:panelGroup>
        </div>
    </div>

    <ui:include src="../../../dialog/image/addImage.xhtml" />
    <ui:include src="../../../dialog/image/updateImage.xhtml" />
    <ui:include src="../../../dialog/image/deleteImage.xhtml" /> 

    <ui:include src="../../../dialog/gps/setGps.xhtml" />      
    <ui:include src="../../../dialog/gps/deleteGps.xhtml" />

</ui:fragment>