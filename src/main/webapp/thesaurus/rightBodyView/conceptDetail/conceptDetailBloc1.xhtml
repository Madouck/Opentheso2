<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:leaf="http://java.sun.com/jsf/composite/jsf2leaf">

    <div class="card mb-4 py-3 border-left-success" style="margin-top: -5px; vertical-align: central">
        <div class="list-group" style="margin-top: -10px; margin-bottom: -10px">
            <div class="list-group-item list-group-item-action" style=" margin-top: -5px">
                <div class="row" style="padding-top: 3px;">
                    <div class="col-3" style="text-align: right;">
                        <h:outputText value=" #{langueBean.getMsg('rightbody.concept.preferred_term')}" 
                                      title="#{langueBean.getMsg('rightbody.concept.tooltip_preferred_term')}"
                                      style="font-size: 14px; font-weight: bold; margin-right: 10px"/>

                        <p:menuButton rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                      icon="pi pi-cog" style="background: none; border: none; box-shadow: none;">

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.rename_concept')}"
                                        actionListener="#{editConcept.reset(conceptView.nodeConcept.term.lexical_value)}"
                                        oncomplete="PF('renameConcept').show();"
                                        update="conceptForm:idRenameConcept"/>
                        </p:menuButton>
                    </div>

                    <div class="col-9">
                        <h:outputText value="#{conceptView.nodeConcept.term.lexical_value} (#{conceptView.nodeConcept.term.lang})"
                                      title="#{conceptView.nodeConcept.concept.idConcept}" style="font-size: 14px;" />
                        <p:commandButton icon="pi pi-arrow-up"
                                         action="#{tree.expandTreeToPath(conceptView.nodeConcept.concept.idConcept,
                                                   conceptView.nodeConcept.concept.idThesaurus, conceptView.nodeConcept.term.lang)}"
                                         actionListener="#{selectedTheso.actionFromConceptToOn()}"
                                         update="containerIndex:formLeftTab containerIndex:formSearch:languageSelect"
                                         style="color:#f47b2a; background: none; border: none; box-shadow: none" 
                                         styleClass="buttonIconOrange" />
                    </div>
                </div>
            </div>
            <div class="list-group-item list-group-item-action" style=" margin-bottom: -5px">
                <div class="row" style="padding-top: 3px">
                    <div class="col-3" style="text-align: right">
                        <h:outputText value=" #{langueBean.getMsg('leftbody.collection')}" 
                                      title="#{langueBean.getMsg('leftbody.collection')}"
                                      style="font-size: 14px; font-weight: bold; margin-right: 10px"/>

                        <p:menuButton rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso 
                                                  or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                      icon="pi pi-cog" style="background: none; border: none; box-shadow: none;">

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.add_to_group')}" 
                                        action="#{addConceptToGroupBean.init()}"
                                        oncomplete="PF('addConceptToGroup').show();"
                                        update="conceptForm:idAddConceptToGroup"
                                        style="font-size: 12px;" />

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.remove_from_group')}" 
                                        actionListener="#{removeFromGroupBean.init()}"
                                        oncomplete="PF('removeConceptFromGroup').show();"
                                        update="conceptForm:idRemoveConceptFromGroup"
                                        style="font-size: 12px;" />

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.add_concept_to_group')}" 
                                        action="#{removeConceptAndChildFromGroupBean.init()}"
                                        oncomplete="PF('addConceptAndChildToGroup').show();"
                                        update="conceptForm:idAddConceptAndChildToGroup"
                                        style="font-size: 12px;" />

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.remove_concept_fom_group')}" 
                                        action="#{removeConceptAndChildFromGroupBean.init()}"
                                        oncomplete="PF('removeConceptAndChildFromGroup').show();"
                                        update="conceptForm:idRemoveConceptAndChildFromGroup"
                                        style="font-size: 12px;" />                    
                        </p:menuButton>
                    </div>

                    <h:panelGroup rendered="#{conceptView.nodeConcept.nodeConceptGroup.size() == 0}" >                          
                        <div class="col-9">
                            <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" 
                                           style="font-size: 12px; color: grey; font-style: italic " />
                        </div>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{conceptView.nodeConcept.nodeConceptGroup.size() != 0}" > 
                        <div class="col-9">
                            <ui:repeat var="domaine" value="#{conceptView.nodeConcept.nodeConceptGroup}" varStatus="status">
                                <p:commandLink rendered="#{domaine.lexicalValue != ''}"
                                               value="#{domaine.lexicalValue}"
                                               action="#{treeGroups.selectThisGroup(domaine.conceptGroup.idgroup)}"
                                               update="containerIndex:formLeftTab containerIndex:formRightTab indexTitle"
                                               style="color: #43B572;" />  
                                <p:commandLink rendered="#{domaine.lexicalValue == ''}"
                                               value="(#{domaine.conceptGroup.idgroup})"
                                               action="#{treeGroups.selectThisGroup(domaine.conceptGroup.idgroup)}"
                                               update="containerIndex:formLeftTab containerIndex:formRightTab indexTitle"
                                               style="color: #43B572;"/>                                        

                                <h:outputText rendered="#{!status.last}" value=" , " style="color: #FF7979"/>
                            </ui:repeat>
                        </div> 
                    </h:panelGroup>

                </div>
            </div>
        </div>        
    </div>

    <ui:include src="../../../dialog/concept/replaceBy.xhtml" />
    <ui:include src="../../../dialog/concept/deleteReplaceBy.xhtml" />

</ui:fragment>