<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:leaf="http://java.sun.com/jsf/composite/jsf2leaf">

    <!-- ligne PrefLabel -->
    <div class="card mb-4 py-3 border-left-success">
        <div class="card-body">
            <div class="container">
                <div class="row">
                    <div class="col-2">
                        <i class="pi pi-angle-double-right" />

                        <h:outputText value=" #{langueBean.getMsg('rightbody.concept.preferred_term')} : " 
                                      title="#{langueBean.getMsg('rightbody.concept.tooltip_preferred_term')}"
                                      style="font-size: 14px; font-weight: bold;"/>
                    </div>

                    <div class="col-1">
                        <p:menuButton rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                      icon="pi pi-cog" style="background: none; border: none; box-shadow: none;">

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.rename_concept')}"
                                        actionListener="#{editConcept.reset(conceptView.nodeConcept.term.lexical_value)}"
                                        oncomplete="PF('renameConcept').show();"/>
                        </p:menuButton>
                    </div>

                    <div class="col-9">
                        <h:outputText value="#{conceptView.nodeConcept.term.lexical_value} (#{conceptView.nodeConcept.term.lang})"
                                      title="#{conceptView.nodeConcept.concept.idConcept}" style="font-size: 14px;" />
                        <p:commandButton icon="pi pi-arrow-up"
                                         action="#{tree.expandTreeToPath(conceptView.nodeConcept.concept.idConcept,
                                                   conceptView.nodeConcept.concept.idThesaurus, conceptView.nodeConcept.term.lang)}"
                                         actionListener="#{selectedTheso.actionFromConceptToOn()}"
                                         update="containerIndex:formLeftTab containerIndex:formSearch:languageSelect"
                                         style="color:#f47b2a; background: none; border: none; box-shadow: none" 
                                         styleClass="buttonIconOrange" />
                    </div>
                </div>

                <!-- ligne concepts qui remplacent le concept déprécié  -->
                <h:panelGroup rendered="#{conceptView.nodeConcept.concept.isDeprecated}" > 
                    <div class="row">
                        <div class="col-3" style="background-color: #C63632; color: white">
                            <h:outputText value="#{langueBean.getMsg('rightbody.concept.replace_with')}" 
                                          title="#{langueBean.getMsg('rightbody.concept.tooltip_replace_with')}" />
                        </div>

                        <div span="1" >
                            <p:menuButton rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                          icon="pi pi-cog" style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                                <p:menuitem value="#{langueBean.getMsg('rightbody.concept.replace_with2')}"  update="idReplaceBy replaceByForm"
                                            action="#{relatedBean.reset()}"
                                            actionListener="#{editConcept.reset('')}"
                                            oncomplete="PF('replaceBy').show();"
                                            style="font-size: 12px;"/>
                                <p:menuitem value="#{langueBean.getMsg('rightbody.concept.delere_replace_with')}"  update="idDeleteReplaceBy deleteReplaceByForm"
                                            action="#{relatedBean.reset()}"
                                            actionListener="#{editConcept.reset('')}"
                                            oncomplete="PF('deleteReplaceBy').show();"
                                            style="font-size: 12px;"/>
                            </p:menuButton>
                        </div>

                        <h:panelGroup rendered="#{conceptView.nodeConcept.replacedBy.size() == 0}">   
                            <div class="col-8">
                                <h:outputText value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" 
                                              style="font-size: 12px; color: grey; font-style: italic " />
                            </div>
                        </h:panelGroup>

                        <h:panelGroup rendered="#{conceptView.nodeConcept.replacedBy.size() != 0}">                          
                            <div class="col-8" >
                                <ui:repeat   var="replace" value="#{conceptView.nodeConcept.replacedBy}" varStatus="status">
                                    <p:commandLink rendered="#{replace.value != ''}" value="#{replace.value}"
                                                   action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,replace.id, conceptView.selectedLang)}"
                                                   update="containerIndex:formRightTab:viewTabConcept:conceptView indexTitle"
                                                   style="color: #C63632;"/>

                                    <p:commandLink rendered="#{replace.value == ''}"
                                                   value="(#{replace.id})"
                                                   action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,replace.id, conceptView.selectedLang)}"
                                                   update="containerIndex:formLeftTab containerIndex:formRightTab indexTitle"
                                                   style="color: #C63632;"/>

                                    <h:outputText rendered="#{!status.last}" value=" , " style="color: #FF7979"/>
                                </ui:repeat>
                            </div>
                        </h:panelGroup>
                    </div>
                </h:panelGroup> 

                <!-- ligne qui rappelle les concepts déprécés qui sont remplacés par ce concept -->
                <h:panelGroup rendered="#{conceptView.nodeConcept.replaces.size() > 0}" >                
                    <div id="idRelaceLabel" class="row">
                        <div class="col-3" style="background-color: #f47b2a; color: white">
                            <h:outputText value="#{langueBean.getMsg('rightbody.concept.replace')}" 
                                          title="#{langueBean.getMsg('rightbody.concept.tooltip_replace')}" />
                        </div>

                        <div class="col-1" />

                        <h:panelGroup rendered="#{conceptView.nodeConcept.replaces.size() != 0}">     
                            <div class="col-8">
                                <ui:repeat   var="replaces" value="#{conceptView.nodeConcept.replaces}" varStatus="status">
                                    <p:commandLink rendered="#{replaces.value != ''}" value="#{replaces.value}"
                                                   action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,replaces.id, conceptView.selectedLang)}"
                                                   update="containerIndex:formRightTab:viewTabConcept:conceptView indexTitle"
                                                   style="color: #f47b2a;" />
                                    <p:commandLink rendered="#{replaces.value == ''}"
                                                   value="(#{replaces.id})"
                                                   action="#{conceptView.getConcept(selectedTheso.selectedIdTheso,replaces.id, conceptView.selectedLang)}"
                                                   update="containerIndex:formLeftTab containerIndex:formRightTab indexTitle"
                                                   style="color: #C63632;" />

                                    <h:outputText rendered="#{!status.last}" value=" , " style="color: #FF7979"/>
                                </ui:repeat>
                            </div>
                        </h:panelGroup>
                    </div>
                </h:panelGroup>

                <!-- ligne Collection -->
                <div class="row" style="margin-top: 10px">
                    <div class="col-2">
                        <i class="pi pi-angle-double-right" />

                        <h:outputText value=" #{langueBean.getMsg('leftbody.collection')}" 
                                      title="#{langueBean.getMsg('leftbody.collection')}"
                                      style="font-size: 14px; font-weight: bold;"/>

                        <h:outputText value=" : " style="font-size: 14px; font-weight: bold;"/>
                    </div>
                    
                    <div class="col-1">
                        <p:menuButton rendered="#{(currentUser.nodeUser != null) and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                                      icon="pi pi-cog" style="background: none; border: none; box-shadow: none;">

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.add_to_group')}" 
                                        action="#{addConceptToGroupBean.init()}"
                                        oncomplete="PF('addConceptToGroup').show();"
                                        style="font-size: 12px;" />

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.remove_from_group')}" 
                                        actionListener="#{removeFromGroupBean.init()}"
                                        oncomplete="PF('removeConceptFromGroup').show();"
                                        style="font-size: 12px;" />

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.add_concept_to_group')}" 
                                        action="#{removeConceptAndChildFromGroupBean.init()}"
                                        oncomplete="PF('addConceptAndChildToGroup').show();"
                                        style="font-size: 12px;" />

                            <p:menuitem value="#{langueBean.getMsg('rightbody.concept.remove_concept_fom_group')}" 
                                        action="#{removeConceptAndChildFromGroupBean.init()}"
                                        oncomplete="PF('removeConceptAndChildFromGroup').show();"
                                        style="font-size: 12px;" />                    
                        </p:menuButton>
                    </div>

                    <h:panelGroup rendered="#{conceptView.nodeConcept.nodeConceptGroup.size() == 0}" >                          
                        <div class="col-9">
                            <h:outputText  value="....." title="#{langueBean.getMsg('rightbody.concept.no_value')}" 
                                           style="font-size: 12px; color: grey; font-style: italic " />
                        </div>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{conceptView.nodeConcept.nodeConceptGroup.size() != 0}" > 
                        <div class="col-9">
                            <ui:repeat var="domaine" value="#{conceptView.nodeConcept.nodeConceptGroup}" varStatus="status">
                                <p:commandLink rendered="#{domaine.lexicalValue != ''}"
                                               value="#{domaine.lexicalValue}"
                                               action="#{treeGroups.selectThisGroup(domaine.conceptGroup.idgroup)}"
                                               update="containerIndex:formLeftTab containerIndex:formRightTab indexTitle"
                                               style="color: #43B572;" />  
                                <p:commandLink rendered="#{domaine.lexicalValue == ''}"
                                               value="(#{domaine.conceptGroup.idgroup})"
                                               action="#{treeGroups.selectThisGroup(domaine.conceptGroup.idgroup)}"
                                               update="containerIndex:formLeftTab containerIndex:formRightTab indexTitle"
                                               style="color: #43B572;"/>                                        

                                <h:outputText rendered="#{!status.last}" value=" , " style="color: #FF7979"/>
                            </ui:repeat>
                        </div> 
                    </h:panelGroup>

                </div>
            </div>
        </div>
    </div>

    <ui:include src="../../../dialog/concept/replaceBy.xhtml" />
    <ui:include src="../../../dialog/concept/deleteReplaceBy.xhtml" />

</ui:fragment>