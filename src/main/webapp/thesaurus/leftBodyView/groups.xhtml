<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui">

    <div style="width: 100%; display: flex;">
        <div style="width: 50%;" />
        <div style="width: 50%; text-align: right;">
            <!-- ajout des collections et sous collections -->
            <p:menuButton icon="fa-plus-circle"
                          rendered="#{(currentUser.nodeUser != null) and (selectedTheso.currentIdTheso!= null) 
                                                        and (roleOnTheso.isManagerOnThisTheso or roleOnTheso.isAdminOnThisTheso or roleOnTheso.isSuperAdmin)}"
                          style="color: #f47b2a; background: none; border: none; box-shadow: none; float: right;"
                          class="dropdown-submenu pull-left">

                <p:menuitem value="Ajouter un groupe/collection" action="#{addGroupBean.init()}"
                            oncomplete="PF('addGroup').show();" update="idAddGroup addGroupForm"
                            styleClass="buttonIconOrange" style="font-size: 12px; " />

                <p:menuitem rendered="#{treeGroups.isGroupNode and treeGroups.selectedNode != null}"
                            value="Ajouter un sous-group/collection" action="#{addGroupBean.init()}"
                            oncomplete="PF('addSubGroup').show();" update="idAddSubGroup addSubGroupForm"
                            styleClass="buttonIconOrange" style="font-size: 12px; " />

                <p:menuitem rendered="#{treeGroups.isGroupNode and treeGroups.selectedNode != null and !treeGroups.isThisGroupHaveSubGroup}"
                            value="Supprimer group/collection" action="#{addGroupBean.init()}"
                            oncomplete="PF('deleteGroup').show();" update="idDeleteGroup deleteGroupForm"
                            styleClass="buttonIconOrange" style="font-size: 12px; " />                  
            </p:menuButton>

            <ui:include src="../../dialog/group/addGroup.xhtml" />
            <ui:include src="../../dialog/group/addSubGroup.xhtml" />
            <ui:include src="../../dialog/group/deleteGroup.xhtml" />
        </div>
    </div>

    <p:tree id="treeGroups" value="#{treeGroups.root}" dynamic="true" var="node" selectionMode="single" selection="#{treeGroups.selectedNode}"
            style="width: auto; border: none; font-size: 12px;  min-height: 400px; max-height: 800px;"
            widgetVar="groupWidget">

        <p:ajax event="expand" listener="#{treeGroups.onNodeExpand}"/>
        <p:ajax event="select" listener="#{treeGroups.onNodeSelect}" update="containerIndex:formRightTab indexTitle"/>

        <p:treeNode expandedIcon="fa object-group" collapsedIcon="fa object-group" >
            <h:outputText title="#{node.nodeId}" value="#{node.notation} " style="font-size: 12px; color: blue"/>
            <h:outputText title="#{node.nodeId}" value="#{node.name}" style="font-size: 12px"/>
        </p:treeNode>                
        <p:treeNode type="group" expandedIcon="fa fa-folder-open far_custom_open" collapsedIcon="fa fa-folder far_custom_collapse" >
            <h:outputText title="#{node.nodeId}" value="#{node.notation} " style="font-size: 12px; color: blue"/>
            <h:outputText title="#{node.nodeId}" value="#{node.name}" style="font-size: 12px"/>
        </p:treeNode>
        <p:treeNode type="subGroup" expandedIcon="fa fa-folder-open far_custom_open" collapsedIcon="fa fa-folder far_custom_collapse">
            <h:outputText title="#{node.nodeId}" value="#{node.notation} " style="font-size: 12px; color: blue"/>
            <h:outputText title="#{node.nodeId}" value="#{node.name}" style="font-size: 12px"/>
        </p:treeNode>                
        <p:treeNode type="file" icon="fa fa-file-o fa_custom_file">
            <h:outputText title="#{node.nodeId}" value="#{node.notation} " style="font-size: 12px; color: blue"/>                        
            <h:outputText title="#{node.nodeId}" value="#{node.name}"  style="font-size: 12px"/>
        </p:treeNode>                    
    </p:tree>

</ui:fragment>
